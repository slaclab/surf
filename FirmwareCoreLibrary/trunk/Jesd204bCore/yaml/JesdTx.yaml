##############################################################################
## This file is part of 'SLAC Firmware Standard Library'.
## It is subject to the license terms in the LICENSE.txt file found in the 
## top-level directory of this distribution and at: 
##    https://confluence.slac.stanford.edu/display/ppareg/LICENSE.html. 
## No part of 'SLAC Firmware Standard Library', including this file, 
## may be copied, modified, propagated, or distributed except according to 
## the terms contained in the LICENSE.txt file.
##############################################################################
#schemaversion 3.0.0
#once

JesdTx: &JesdTx
  class: MMIODev
  configPrio: 1
  description: JESD TX Module
  size: 0x100
  children:
    Enable:
      at:
        offset: 0x00
      class: IntField
      name: Enable
      sizeBits: 8
      mode: RW
      description: Enable[7:0]
    SubClass:
    #########################################################    
      at:
        offset: 0x10
      class: IntField
      name: SubClass
      sizeBits: 1
      lsBit: 0
      mode: RW
      description: SubClass
    ReplaceEnable:
    #########################################################  
      at:
        offset: 0x10
      class: IntField
      name: ReplaceEnable
      sizeBits: 1
      lsBit: 1
      mode: RW
      description: ReplaceEnable
    ResetGTs:
    #########################################################  
      at:
        offset: 0x10
      class: IntField
      name: ResetGTs
      sizeBits: 1
      lsBit: 2
      mode: RW
      description: ResetGTs
    InvertSync:
    ######################################################### 
      at:
        offset: 0x10
      class: IntField
      name: InvertSync
      sizeBits: 1
      lsBit: 4
      mode: RW
      description: InvertSync
    ScrambleEnable:
    ######################################################### 
      at:
        offset: 0x10
      class: IntField
      name: ScrambleEnable
      sizeBits: 1
      lsBit: 5
      mode: RW
      description: ScrambleEnable
    RampStep:
    ######################################################### 
      at:
        offset: 0x14
      class: IntField
      name: RampStep
      sizeBits: 16
      mode: RW
      description: Ramp increment step and a period of the wave in c-c
    SquarePeriod:
    ######################################################### 
      at:
        offset: 0x16
      class: IntField
      name: SquarePeriod
      sizeBits: 16
      mode: RW
      description: Ramp increment step and a period of the wave in c-c
    LowAmplitudeVal:
    ######################################################### 
      at:
        offset: 0x18
      class: IntField
      name: LowAmplitudeVal
      mode: RW
      description: Low value of the square waveform amplitude
    HighAmplitudeVal:
    ######################################################### 
      at:
        offset: 0x1C
      class: IntField
      name: HighAmplitudeVal
      mode: RW
      description: High value of the square waveform amplitude
    GTXReady:
    #########################################################        
      at:
        offset: 0x040
        stride: 4
        nelms: 8
      class: IntField
      name: GTXReady
      sizeBits: 1
      lsBit: 0
      mode: RO
      description: GTXReady[7:0]
    DataValid:
    #########################################################        
      at:
        offset: 0x040
        stride: 4
        nelms: 8
      class: IntField
      name: DataValid
      sizeBits: 1
      lsBit: 1
      mode: RO
      description: DataValid[7:0]
    IlasActive:
    #########################################################        
      at:
        offset: 0x040
        stride: 4
        nelms: 8
      class: IntField
      name: IlasActive
      sizeBits: 1
      lsBit: 2
      mode: RO
      description: IlasActive[7:0]
    nSync:
    #########################################################        
      at:
        offset: 0x040
        stride: 4
        nelms: 8
      class: IntField
      name: nSync
      sizeBits: 1
      lsBit: 3
      mode: RO
      description: nSync[7:0]
    TxEnabled:
    #########################################################        
      at:
        offset: 0x040
        stride: 4
        nelms: 8
      class: IntField
      name: TxEnabled
      sizeBits: 1
      lsBit: 4
      mode: RO
      description: TxEnabled[7:0]
    SysRefDetected:
    #########################################################        
      at:
        offset: 0x040
        stride: 4
        nelms: 8
      class: IntField
      name: SysRefDetected
      sizeBits: 1
      lsBit: 5
      mode: RO
      description: SysRefDetected[7:0]
    data_out_mux:
    #########################################################        
      at:
        offset: 0x080
        stride: 4
        nelms: 8
      class: IntField
      name: data_out_mux
      sizeBits: 4
      lsBit: 0
      mode: RO
      description: 'data_out_mux[7:0]: Select between: b000 - Output zero, b001 -
        Parallel data from inside FPGA, b010 - Data from AXI stream, b011 - Test data'
    test_out_mux:
    #########################################################        
      at:
        offset: 0x080
        stride: 4
        nelms: 8
      class: IntField
      name: test_out_mux
      sizeBits: 4
      lsBit: 4
      mode: RW
      description: 'data_out_mux[7:0]: Select between: b000 - Saw signal increment,
        b001 - Saw signal decrement, b010 - Square wave,  b011 - Output zero'
